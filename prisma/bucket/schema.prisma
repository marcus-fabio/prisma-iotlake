generator client {
  provider      = "prisma-client-js"
  output        = "../../node_modules/.prisma/client/bucket"
  binaryTargets = ["native", "rhel-openssl-3.0.x", "rhel-openssl-1.0.x"]
}

datasource db {
  provider = "mysql"
  url      = env("BUCKET_URL")
}

model EquipmentData {
  id           String                @id @db.VarChar(30)
  equipment_id String?               @db.VarChar(40)
  device_id    String?               @db.VarChar(40)
  time         String?               @db.VarChar(40)
  group        String?               @db.VarChar(40)
  variable     String?               @db.VarChar(50)
  value        String?               @db.VarChar(2048)
  location     Unsupported("point")?
  metadata     Json?
  created_at   DateTime              @default(now()) @db.DateTime(3)
  updated_at   DateTime              @updatedAt @db.Timestamp(3)
  ttl          DateTime?             @db.Timestamp(0)

  @@index([created_at], map: "idx_created_at")
  @@index([device_id, time, variable], map: "idx_device_id_time_variable")
  @@index([device_id, variable, time], map: "idx_device_id_variable_time")
  @@index([equipment_id, created_at, variable], map: "idx_equipment_id_created_at_variable")
  @@index([equipment_id, time, variable], map: "idx_equipment_id_group_variable")
  @@index([equipment_id, time, variable], map: "idx_equipment_id_time_variable")
  @@index([equipment_id, value(length: 600)], map: "idx_equipment_id_value")
  @@index([equipment_id, variable, time], map: "idx_equipment_id_variable_time")
  @@index([equipment_id, variable, value(length: 600)], map: "idx_equipment_id_variable_value")
  @@index([time], map: "idx_time")
  @@index([ttl], map: "idx_ttl")
  @@index([variable, equipment_id, time], map: "idx_variable_equipment_id_time")
  @@map("equipmentData")
}
